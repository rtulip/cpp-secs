<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SECS: ecs::dispatch::DispatcherContainerBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SECS
   &#160;<span id="projectnumber">v0.0.1</span>
   </div>
   <div id="projectbrief">An Entity Component System with Stateful Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ecs</b></li><li class="navelem"><b>dispatch</b></li><li class="navelem"><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html">DispatcherContainerBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classecs_1_1dispatch_1_1_dispatcher_container_builder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ecs::dispatch::DispatcherContainerBuilder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to build a DispatcherContainer based on user described dependencies.  
 <a href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="world__class_8hpp_source.html">world_class.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5032db00e549409c248d405085fc88e"><td class="memItemLeft" align="right" valign="top"><a id="ad5032db00e549409c248d405085fc88e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DispatcherContainerBuilder</b> (DispatcherContainer *ref)</td></tr>
<tr class="separator:ad5032db00e549409c248d405085fc88e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7ba8c79e3281c37af492a5eff2af662"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html">DispatcherContainerBuilder</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html#af7ba8c79e3281c37af492a5eff2af662">add_system</a> (<a class="el" href="classecs_1_1dispatch_1_1_executable.html">Executable</a> *exe_ptr, const std::string exe_name, std::initializer_list&lt; std::string &gt; deps)</td></tr>
<tr class="memdesc:af7ba8c79e3281c37af492a5eff2af662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a System to be scheuled by the dispatcher.  <a href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html#af7ba8c79e3281c37af492a5eff2af662">More...</a><br /></td></tr>
<tr class="separator:af7ba8c79e3281c37af492a5eff2af662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b25a156a0e1e835082ae0072f47c48b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html#a2b25a156a0e1e835082ae0072f47c48b">done</a> ()</td></tr>
<tr class="memdesc:a2b25a156a0e1e835082ae0072f47c48b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish specifying systems to add to the Dispatcher.  <a href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html#a2b25a156a0e1e835082ae0072f47c48b">More...</a><br /></td></tr>
<tr class="separator:a2b25a156a0e1e835082ae0072f47c48b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to build a DispatcherContainer based on user described dependencies. </p>
<p>Dependencies MUST be programmer defined. This is required to allow the programmer to specify the order in which systems are run, even if the signature is mutually exclusive.</p>
<p>It is the PROGRAMMER'S responsibility to ensure that they do not introduce data races. Systems with one or more shared component signatures MUST have a dependency relationship, either directly or indirectly.</p>
<p>The resuting DispatcherContainer is built using a BFS Topological sort.</p>
<p>Example: Consider the following Systems: System A&lt;Com_1, Com_2&gt; System B&lt;Com_2&gt; System C&lt;Com_1&gt;</p>
<p>Systems B and C both share a component signature with System A, thus there must be a defined order.</p>
<p>Dependencies can be defined directly: [ B, C ] -&gt; <a href="A depends on both B, C. B &amp; C can be run in parallel safely.">A</a> or indirectly: [ A ] -&gt; [ B ] -&gt; [ C ] (C depends on B, which depends on A) </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af7ba8c79e3281c37af492a5eff2af662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7ba8c79e3281c37af492a5eff2af662">&#9670;&nbsp;</a></span>add_system()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html">DispatcherContainerBuilder</a> &amp; ecs::dispatch::DispatcherContainerBuilder::add_system </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classecs_1_1dispatch_1_1_executable.html">Executable</a> *&#160;</td>
          <td class="paramname"><em>exe_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>exe_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::initializer_list&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>deps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a System to be scheuled by the dispatcher. </p>
<p>It is currently required that Systems are added in an order such that the System's dependencies have already been defined. If a dependency is not found, a runtime error is thrown. This is sufficient to ensure that the dependency graph is acyclic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exe_ptr</td><td>The System pointer </td></tr>
    <tr><td class="paramname">exe_name</td><td>A unique identifier for the system. Used to specify dependencies </td></tr>
    <tr><td class="paramname">deps</td><td>A list of dependencies. <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classecs_1_1dispatch_1_1_dispatcher_container_builder.html" title="Class to build a DispatcherContainer based on user described dependencies.">DispatcherContainerBuilder</a>&amp; </dd></dl>

</div>
</div>
<a id="a2b25a156a0e1e835082ae0072f47c48b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b25a156a0e1e835082ae0072f47c48b">&#9670;&nbsp;</a></span>done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ecs::dispatch::DispatcherContainerBuilder::done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish specifying systems to add to the Dispatcher. </p>
<p>The DispatcherContainer is built using a BFS Topological sort. The algorithm works as follows:</p>
<p>1) Find all Verticies with an 'in degree' of 0 2) Add each of the found Verticies to the next 'Stage'. 3) Remove each found Vertex from the graph. 4) Repeat steps 1-3 until the graph is empty.</p>
<p>An additional check to ensure that the graph is acyclic is done. If there are no found Verticies with an 'in degree' of 0 AND the graph isn't empty, then there is a cycle in the graph. In this situation a runtime error is thrown.</p>
<p>Since the dependencies are defined 'bottom up', this topological sort will find the systems to execute last first. Since building this DispatcherContainer is to be done once per world, the execution time isn't super critical. As such I'm using the costly 'insert' to put each stage before the last, such that the DispatcherContainer order makes sense. If this is deemed unnessisary, container can be iterated in reverse. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/ecs/world/<a class="el" href="world__class_8hpp_source.html">world_class.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
